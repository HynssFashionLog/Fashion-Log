<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <title>상세 페이지</title>
  <link rel="stylesheet" th:href="@{/css/lookbook.css}">
</head>
<body>
<div class="container">
  <h1 th:text="${lookbook.title}"></h1>
  <p th:text="${lookbook.content}"></p>
  <p>회원 아이디: <span th:text="${lookbook.memberId}"></span></p>
  <p>글 상태: <span th:text="${lookbook.postStatus ? 'Posted' : 'Not Posted'}"></span></p>
  <p>작성일: <span th:text="${lookbook.createdAt}"></span></p>
  <p>수정일: <span th:text="${lookbook.updatedAt}"></span></p>
  <a th:href="@{/fashionlog/lookbook/{id}/edit(id=${lookbook.id})}" class="button">수정</a>
  <form th:action="@{/fashionlog/lookbook/{id}/delete(id=${lookbook.id})}" method="post" style="display:inline;">
    <input type="submit" value="삭제" class="button" onclick="return confirm('정말 삭제하시겠습니까?');">
  </form>
  <a href="/fashionlog/lookbook" class="button">Lookbook 게시판으로 돌아가기</a>

  <h2>댓글</h2>
  <div th:each="comment : ${comments}" class="comment">
    <p th:text="${comment.content}"></p>
    <p>작성자: <span th:text="${comment.memberId}"></span></p>
    <p>작성일: <span th:text="${comment.createdAt}"></span></p>
    <!-- 댓글 수정 폼 -->
    <form th:action="@{/fashionlog/lookbook/{lookbookId}/comments/{commentId}/edit(lookbookId=${lookbook.id}, commentId=${comment.id})}" method="post" style="display:inline;">
      <input type="text" name="content" th:value="${comment.content}">
      <input type="submit" value="수정" class="button">
    </form>
    <!-- 댓글 삭제 폼 -->
    <form th:action="@{/fashionlog/lookbook/{lookbookId}/comments/{commentId}/delete(lookbookId=${lookbook.id}, commentId=${comment.id})}" method="post" style="display:inline;">
      <input type="submit" value="삭제" class="button" onclick="return confirm('정말 삭제하시겠습니까?');">
    </form>
  </div>

  <h3>새 댓글 작성</h3>
  <form th:action="@{/fashionlog/lookbook/{id}/comments(id=${lookbook.id})}" th:object="${newComment}" method="post">
    <input type="text" th:field="*{memberId}" placeholder="회원 아이디">
    <textarea th:field="*{content}" placeholder="댓글 내용"></textarea>
    <input type="hidden" th:field="*{commentStatus}" value="true">
    <input type="submit" value="댓글 작성" class="button">
  </form>
</div>
</body>
</html>
